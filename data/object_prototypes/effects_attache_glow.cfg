{
id: "effects_attache_glow",
prototype: ["effects_attache"],



properties: {
#-------------------------- vars --------------------------#
	is_currently_on: { type: "bool", default: true },

	rel_x_offset: { type: "decimal", default: 0.0 },
	rel_y_offset: { type: "decimal", default: 0.0 },
	
#-------------------------- cosmetics --------------------------#
	core_display_radius: "decimal :: 100",
	base_alpha: "decimal :: 80",

#-------------------------- logic --------------------------#

	turn_on: "commands :: set(is_currently_on, true)",
	turn_off: "commands :: [
								set(is_currently_on, false),
								set(relative_x, 0),
								set(relative_y, 0),
								set(alpha, 0),
								set(lights, [])
							]",
	
	process_being_on: "[
							set(alpha, round(base_alpha + amplitude)),
							set(lights, [circle_light(me, lib.math.round(amplitude))]),
							set(relative_x, rel_x_offset + 1d(amplitude_scaled*2) - amplitude_scaled),
							set(relative_y, rel_y_offset + 1d(amplitude_scaled*2) - amplitude_scaled),
						]	where amplitude_scaled = amplitude / 10.0
							where round = lib.math.round
							where amplitude =  (sin( cycle*(3.6 + 1d2) ) * 7)/0.36",
},

on_process: "if(is_currently_on, process_being_on)",



animation: {
	id: "normal",
	image: "props/glow2.png",
	rect: [0,0,63,63],
	frames: 1,
	duration: 100000,
	blend:["src_alpha","one"],
},

}

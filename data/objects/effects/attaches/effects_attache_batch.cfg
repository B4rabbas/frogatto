{
	id: "effects_attache_batch",
	prototype: ["effects_attache"],

	properties: {

		do_setup: "commands :: [
			initialize_position,
			spawn_color_attache,
			spawn_particle_sets,	
		]",
	
		turn_off: "commands :: [
			;map(subordinate_attaches, value.schedule_death_cleanup)
		]",


		subordinate_attaches: { type: "[obj effects_attache]", default: [] },
		
	#-------------------------- configuration --------------------------#
			//in all honesty, we'll only need one of these per batch.
		color_adjustment_hsl: { type: "{ h: decimal, s: decimal, l: decimal }", default: { h: 0.0, s: 0.0, l: 1.0 } },
		
		spawn_color_attache: "
			[
				add_object(attache),
				add(subordinate_attaches, [attache]),
			] where attache = object('effects_attache_recolor', {
				color_adjustment_hsl: color_adjustment_hsl,
				x: mid_x,
				y: mid_y,
				parent: _parent_obj,
				time_to_die: 200,
			})
		",
		
			//these, however, we could have a bunch of - same with the sounds
		particle_types: { type: "[string]", init: "[]" },

		spawn_particle_sets: "commands :: map(particle_types,
			[
				add_object(attache),
				add(subordinate_attaches, [attache]),
			] where attache = object('particle_attache', {
					_particle_type: value,
					x: mid_x,
					y: mid_y,
					parent: _parent_obj,
					time_to_die: 200,
				})
		)",	
	}


	#-------------------------- presets --------------------------#
		

}

{
	id: "effects_attache_recolor",
	prototype: ["effects_attache"],

	types: {
		HSLColor: "{ h: decimal, s: decimal, l: decimal }",
	},

	properties: {

		do_setup: "commands :: [
			initialize_position,
			set_colors	
		]",
	
		turn_off: "commands :: [
			unset_colors
		]",
		
	#-------------------------- configuration --------------------------#
		default_color_adjustment_hsl:  "HSLColor :: { h: 0.0, s: 1.0, l: 1.0 }",

		color_adjustment_hsl:  "HSLColor :: if(size(colors_hsl) > 0,
												colors_hsl[0],								
												{ h: 0.0, s: 0.0, l: 1.0 }
											)",


		colors_hsl:  { type: "[HSLColor]", default: [{ h: 0.0, s: 0.0, l: 1.0 }] },


		set_colors:  "[
			set(_parent_obj.use_forced_hue, true),
			add(_parent_obj.recolor_attaches, [(obj effects_attache_recolor <- me)]),
		]",

		unset_colors:  "[
			set(_parent_obj.use_forced_hue, false),
			set(_parent_obj.recolor_attaches, filter(_parent_obj.recolor_attaches, value != me)),
		]",
	}

}
